#include<iostream>
#include"Include/sinks/ConsoleSinkImpl.hpp"
#include"Include/sinks/FileSinkImpl.hpp"
#include"Include/sinks/ILogSink.hpp"
#include"Include/LogManager.hpp"
#include"Include/LogMessage.hpp"
// #include"Include/safe/SafeFile.hpp"
// #include"Include/safe/SafeSocket.hpp"
#include"Include/telemetry/FileTelemetrySourceImpl.hpp"
#include"Include/telemetry/SocketTelemetrySourceImpl.hpp"
#include"Include/Formatter.hpp"






// to run socket write in terminal nc -l 12345 
//source = std::make_unique<SocketTelemetrySrc>("127.0.0.1", 12345);







int main()
{



    std::string raw_value = "82.5";

    auto log_opt = Formatter<CPU_policy>::format(raw_value);

    if (log_opt.has_value()) {
        std::cout << log_opt.value() << std::endl;
    } else {
        std::cout << "Failed to parse telemetry data." << std::endl;
    }
    
    return 0;
}
